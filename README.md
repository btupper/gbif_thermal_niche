gbifniche
================

R tool for assessing uncertainties around qualities of observation for
environmental niches using GBIF data

## Requirements

-   [R v4.1](https://www.r-project.org/)
-   [rlang](https://CRAN.R-project.org/package=rlang)
-   [dplyr](https://CRAN.R-project.org/package=dplyr)
-   [readr](https://CRAN.R-project.org/package=readr)
-   [ggplot2](https://CRAN.R-project.org/package=ggplot2)
-   [rgbif](https://CRAN.R-project.org/package=rgbif)
-   [rappdirs](https://CRAN.R-project.org/package=rappdirs)

## Installation

    remotes::install_github("kolive4/gbif_thermal_niche")

## Usage

Retrieve a data set by species.

``` r
library(gbifniche)
# make it quiet for the purpose of the README markdown
x = fetch_gbif(species = "Squalus acanthias subsp. acanthias Linnaeus, 1758", 
               verbose = FALSE, progress = FALSE) |>
  dplyr::glimpse()
```

    ## Rows: 9,500
    ## Columns: 73
    ## $ name                             <chr> "Squalus acanthias acanthias", "Squal…
    ## $ longitude                        <dbl> -6.18211, -58.44000, -58.21000, -72.8…
    ## $ latitude                         <dbl> 47.49023, 47.26000, 47.08000, 40.0700…
    ## $ issues                           <chr> "gass84", "gass84", "gass84", "gass84…
    ## $ prov                             <chr> "gbif", "gbif", "gbif", "gbif", "gbif…
    ## $ key                              <chr> "3489356476", "18485333", "18485335",…
    ## $ scientificName                   <chr> "Squalus acanthias acanthias", "Squal…
    ## $ datasetKey                       <chr> "6cbf7d4d-13cb-4604-8668-db68fe753349…
    ## $ publishingOrgKey                 <chr> "1928bdf0-f5d2-11dc-8c12-b8a03c50a862…
    ## $ installationKey                  <chr> "07ea29ef-e386-4278-ae0f-095778a1b061…
    ## $ publishingCountry                <chr> "FR", "CA", "CA", "CA", "CA", "CA", "…
    ## $ protocol                         <chr> "DWC_ARCHIVE", "DWC_ARCHIVE", "DWC_AR…
    ## $ lastCrawled                      <chr> "2022-04-20T10:46:55.512+00:00", "202…
    ## $ lastParsed                       <chr> "2022-04-25T18:41:54.030+00:00", "202…
    ## $ crawlId                          <int> 169, 168, 168, 168, 168, 168, 168, 16…
    ## $ hostingOrganizationKey           <chr> "1928bdf0-f5d2-11dc-8c12-b8a03c50a862…
    ## $ basisOfRecord                    <chr> "HUMAN_OBSERVATION", "HUMAN_OBSERVATI…
    ## $ occurrenceStatus                 <chr> "PRESENT", "PRESENT", "PRESENT", "PRE…
    ## $ taxonKey                         <int> 6163063, 6163063, 6163063, 6163063, 6…
    ## $ kingdomKey                       <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…
    ## $ phylumKey                        <int> 44, 44, 44, 44, 44, 44, 44, 44, 44, 4…
    ## $ classKey                         <int> 121, 121, 121, 121, 121, 121, 121, 12…
    ## $ orderKey                         <int> 883, 883, 883, 883, 883, 883, 883, 88…
    ## $ familyKey                        <int> 5872, 5872, 5872, 5872, 5872, 5872, 5…
    ## $ genusKey                         <int> 2420869, 2420869, 2420869, 2420869, 2…
    ## $ speciesKey                       <int> 5216368, 5216368, 5216368, 5216368, 5…
    ## $ acceptedTaxonKey                 <int> 5216368, 5216368, 5216368, 5216368, 5…
    ## $ acceptedScientificName           <chr> "Squalus acanthias Linnaeus, 1758", "…
    ## $ kingdom                          <chr> "Animalia", "Animalia", "Animalia", "…
    ## $ phylum                           <chr> "Chordata", "Chordata", "Chordata", "…
    ## $ order                            <chr> "Squaliformes", "Squaliformes", "Squa…
    ## $ family                           <chr> "Squalidae", "Squalidae", "Squalidae"…
    ## $ genus                            <chr> "Squalus", "Squalus", "Squalus", "Squ…
    ## $ species                          <chr> "Squalus acanthias", "Squalus acanthi…
    ## $ genericName                      <chr> "Squalus", "Squalus", "Squalus", "Squ…
    ## $ specificEpithet                  <chr> "acanthias", "acanthias", "acanthias"…
    ## $ infraspecificEpithet             <chr> "acanthias", "acanthias", "acanthias"…
    ## $ taxonRank                        <chr> "SUBSPECIES", "SUBSPECIES", "SUBSPECI…
    ## $ taxonomicStatus                  <chr> "SYNONYM", "SYNONYM", "SYNONYM", "SYN…
    ## $ coordinateUncertaintyInMeters    <dbl> 256905, NA, NA, NA, NA, NA, NA, NA, N…
    ## $ year                             <int> 2017, 1994, 1994, 1994, 1994, 1994, 1…
    ## $ month                            <int> 3, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2…
    ## $ day                              <int> 3, 21, 25, 7, 8, 1, 19, 19, 20, 4, 5,…
    ## $ eventDate                        <date> 2017-03-03, 1994-01-21, 1994-01-25, …
    ## $ lastInterpreted                  <chr> "2022-04-25T18:41:54.030+00:00", "202…
    ## $ license                          <chr> "http://creativecommons.org/licenses/…
    ## $ isInCluster                      <lgl> FALSE, FALSE, FALSE, FALSE, FALSE, FA…
    ## $ datasetID                        <chr> "6B38DF84-3005-38DF-E053-2614A8C09B0F…
    ## $ recordedBy                       <chr> "()", NA, NA, NA, NA, NA, NA, NA, NA,…
    ## $ inCluster                        <lgl> FALSE, FALSE, FALSE, FALSE, FALSE, FA…
    ## $ geodeticDatum                    <chr> "WGS84", "WGS84", "WGS84", "WGS84", "…
    ## $ class                            <chr> "Elasmobranchii", "Elasmobranchii", "…
    ## $ countryCode                      <chr> "FR", "CA", "CA", "US", "US", "US", "…
    ## $ country                          <chr> "France", "Canada", "Canada", "United…
    ## $ eventID                          <chr> "6CF446C4-4B65-145C-E053-2614A8C003BC…
    ## $ identifier                       <chr> "6CF446C4-4B65-145C-E053-2614A8C003BC…
    ## $ originalNameUsage                <chr> "Squalus acanthias acanthias", NA, NA…
    ## $ county                           <chr> "Atlantique (plateau continental)", N…
    ## $ associatedReferences             <chr> "Mention dans le site Natura 2000 FR5…
    ## $ identificationVerificationStatus <chr> "Probable, high degree of reliability…
    ## $ nameAccordingTo                  <chr> "Gargominy O (2021). TAXREF. Version …
    ## $ occurrenceRemarks                <chr> "WGS84", NA, NA, NA, NA, NA, NA, NA, …
    ## $ gbifID                           <chr> "3489356476", "18485333", "18485335",…
    ## $ occurrenceID                     <chr> "6CF446C4-4B65-145C-E053-2614A8C003BC…
    ## $ taxonID                          <chr> "564065", NA, NA, NA, NA, NA, NA, NA,…
    ## $ datasetName                      <chr> NA, "ECNASAP - East Coast North Ameri…
    ## $ rightsHolder                     <chr> NA, "Her Majesty the Queen in right o…
    ## $ catalogNumber                    <chr> NA, "27340.SPIDOG", "27371.SPIDOG", "…
    ## $ institutionCode                  <chr> NA, "DFO-NG", "DFO-NG", "NMFS-NEFSC",…
    ## $ locality                         <chr> NA, "Stratum.303", "Stratum.715", "St…
    ## $ collectionCode                   <chr> NA, "20.45", "20.45", "DE.17", "DE.17…
    ## $ language                         <chr> NA, "En", "En", "En", "En", "En", "En…
    ## $ type                             <chr> NA, "Dataset", "Dataset", "Dataset", …
